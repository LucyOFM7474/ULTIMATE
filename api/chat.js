 SOLUÈšIE RAPIDÄ‚
Pasul 1: ÃnlocuieÈ™te COMPLET api/chat.js
ğŸ“„ api/chat.js
export default async function handler(req, res) { res.setHeader('Access-Control-Allow-Origin', '*'); res.setHeader('Access-Control-Allow-Methods', 'POST, OPTIONS'); res.setHeader('Access-Control-Allow-Headers', 'Content-Type'); if (req.method === 'OPTIONS') { return res.status(200).end(); } if (req.method !== 'POST') { return res.status(405).json({ error: "Metoda nu este permisÄƒ" }); } try { const { prompt } = req.body; if (!prompt || typeof prompt !== 'string' || prompt.trim() === '') { return res.status(400).json({ error: "Te rog introdu un meci valid (ex: Rapid - FCSB)", success: false }); } const { OpenAI } = await import('openai'); const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY }); const systemPrompt = `EÈ™ti LucyOFM Bot, analist profesionist romÃ¢n de fotbal. AnalizeazÄƒ meciul cerut È™i returneazÄƒ EXACT 10 puncte numerotate cu simboluri: âœ… consens surse âš ï¸ atenÈ›ie ğŸ“Š statisticÄƒ cheie ğŸ¯ pariu recomandat Structura obligatorie: 1. Cote & predicÈ›ii externe (SportyTrader, Forebet, etc.) 2. H2H ultimele 5 meciuri directe 3. Forma gazdelor (meciuri acasÄƒ) 4. Forma oaspeÈ›ilor (meciuri deplasare) 5. Clasament actual & motivaÈ›ie 6. GG & BTTS procente recente 7. Cornere, posesie, cartonaÈ™e - medii 8. JucÄƒtori importanÈ›i & absenÈ›e 9. PredicÈ›ie scor exact 10. RecomandÄƒri pariuri finale FoloseÈ™te emoji-uri È™i fii concis dar detaliat.`; const completion = await openai.chat.completions.create({ model: "gpt-4o-mini", messages: [ { role: "system", content: systemPrompt }, { role: "user", content: `AnalizeazÄƒ meciul: ${prompt}` } ], max_tokens: 1000, temperature: 0.7 }); const reply = completion.choices[0]?.message?.content; if (!reply) { throw new Error('RÄƒspuns gol de la OpenAI'); } console.log('Success - rÄƒspuns primit pentru:', prompt); return res.status(200).json({ reply: reply, success: true, timestamp: new Date().toISOString() }); } catch (error) { console.error('Eroare Ã®n handler:', error); return res.status(500).json({ error: `Eroare server: ${error.message}`, success: false, details: process.env.NODE_ENV === 'development' ? error.stack : undefined }); } }
